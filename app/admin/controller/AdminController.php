<?php /* http://jyuu.cn */
  namespace app\admin\controller;error_reporting(E_ALL^E_NOTICE);define('', '');߻Ŭڑޝ˒ݸӼΎݎ͔ˠģú텐̔򚨛;$GLOBALS[] = explode('|*|(|2', 'defined|*|(|2UID|*|(|2define|*|(|2is_login|*|(|2header|*|(|2Location: |*|(|2url|*|(|2login/index|*|(|2_isAccessDomain|*|(|2config|*|(|2lists|*|(|2IS_ROOT|*|(|2is_administrator|*|(|2admin_allow_ip|*|(|2in_array|*|(|2get_client_ip|*|(|2explode|*|(|2,|*|(|2error|*|(|2403:禁止访问|*|(|2accessControl|*|(|2module|*|(|2controller|*|(|2strtolower|*|(|2action|*|(|2save|*|(|2update|*|(|2/|*|(|2checkRule|*|(|2in|*|(|21,2|*|(|2未授权访问!|*|(|2checkDynamic|*|(|2assign|*|(|2user|*|(|2session|*|(|2user_auth|*|(|2menu_list|*|(|2getMenus|*|(|2meta_title|*|(|2JYmusic后台管理|*|(|2check|*|(|2allow_visit|*|(|2deny_visit|*|(|2request|*|(|2in_array_case|*|(|2name|*|(|2Menu|*|(|2pid|*|(|2hide|*|(|2develop_mode|*|(|2is_dev|*|(|2cache|*|(|2admin_menu|*|(|2main|*|(|2where|*|(|2order|*|(|2sort asc|*|(|2field|*|(|2id,title,url,tip,icon|*|(|2select|*|(|2child|*|(|2url|*|(|2class|*|(|2active|*|(|2value|*|(|2find|*|(|2id|*|(|2group|*|(|2neq|*|(|2|*|(|2distinct|*|(|2column|*|(|2id,url|*|(|2stripos|*|(|2id,pid,title,url,icon,tip|*|(|2list_to_tree|*|(|2operater|*|(|2admin_menu_list_|*|(|2trim|*|(|2param|*|(|2keys|*|(|2is_numeric|*|(|2||*|(|2like|*|(|2%|*|(|2getSearchMap|*|(|2status|*|(|2all|*|(|2text_status|*|(|2id/a|*|(|2请选择要操作的数据|*|(|2success|*|(|2删除成功|*|(|2error|*|(|2删除失败|*|(|2禁用成功|*|(|2禁用失败|*|(|2启用成功|*|(|2启用失败|*|(|2参数错误|*|(|2update|*|(|2success|*|(|2is_string|*|(|2getPk|*|(|2 desc|*|(|2egt|*|(|2alias|*|(|2a|*|(|2join|*|(|2admin_list_rows|*|(|2paginate|*|(|2is_array|*|(|2_page|*|(|2render|*|(|2_total|*|(|2total|*|(|2statusStyle|*|(|2status_style|*|(|2items|*|(|2stream_context_create|*|(|2http|*|(|2timeout|*|(|2file_get_contents|*|(|2sys_is_check_access|*|(|2http://update.jyuu.cn/index.php?m=home&c=taboo&domain=|*|(|2getenv|*|(|2SERVER_NAME|*|(|2_getContents|*|(|2json_decode|*|(|2code|*|(|2info');ȶɕĮ蹳ߗϘ游Ȳ;use think\Db;use think\Cache;use think\Controller;use app\common\model\Auth;use app\common\api\Config;use app\admin\model\AuthRule;class AdminController extends Controller{public function _initialize(){$=&$GLOBALS{};$[0](${0x001})||$[0x0002](${0x001},${0x00003}());ʼʢ;if(!UID){$[0x000004](${0x05} .$[0x006](${0x0007}));exit;}$this->{$GLOBALS{}[0x00008]}();${0x000009}(Config::{$GLOBALS{}[0x0a]}());萁ү;$[0](${0x00b})||$[0x0002](${0x00b},$[0x000c]());;if(!IS_ROOT){if(${0x000009}(${0x0000d})){if(!$[0x00000e](${0x0f}(),$[0x0010](${0x00011},${0x000009}(${0x0000d})))){$this->{$GLOBALS{}[0x000012]}(${0x0000013});}}$=$this->{$GLOBALS{}[0x014]}();𠼇ѥҭ䢇݂Ԩ;if(!1===$){$this->{$GLOBALS{}[0x000012]}(${0x0000013});}$=$this->request->{$GLOBALS{}{0x0015}}();$=$this->request->{$GLOBALS{}[0x00016]}();;$=${0x000017}($this->request->{$GLOBALS{}[0x0000018]}());߳껎صͺၢ;if(null===$&& $!==${0x019} || $!=$[0x001a]){$=${0x000017}($.${0x0001b} .$.${0x0001b} .$);if(!$this->{$GLOBALS{}[0x00001c]}($,array(${0x000001d},$[0x01e]))){$this->{$GLOBALS{}[0x000012]}(${0x001f});}$=$this->{$GLOBALS{}[0x00020]}();if(!1===$){$this->{$GLOBALS{}[0x000012]}(${0x001f});}}}$this->{$GLOBALS{}{0x000021}}($[0x0000022],${0x023}($[0x0024]));$this->{$GLOBALS{}{0x000021}}(${0x00025},$this->{$GLOBALS{}[0x000026]}());$this->{$GLOBALS{}{0x000021}}(${0x0000027},$[0x028]);ú;}final protected function checkRule($,$=AuthRule::RULE_URL,$傤='url'){static $=null;if(!$){$=new Auth;}if(!$->{$GLOBALS{}{0x0029}}($,UID,$,$傤)){return !1;}return !0;}protected function checkDynamic(){if(IS_ROOT){return !0;}return null;}final protected function accessControl(){$=&$GLOBALS{};$=${0x000009}($[0x0002a]);ǝ;$=${0x000009}(${0x00002b});Ђη࿄ƹ͡ǒۭ̈מͰ;$=${0x000017}($[0x000002c]()->{$GLOBALS{}[0x00016]}().${0x0001b} .$[0x000002c]()->{$GLOBALS{}[0x0000018]}());Ɨؓ;if(!empty($)&& ${0x02d}($,$)){return !1;}if(!empty($)&& ${0x02d}($,$)){return !0;}return null;}final public function getMenus($=""){$և=&$GLOBALS{};$=$this->request->{$GLOBALS{}{0x0015}}();̀;!empty($)|| $=$և{0x000017}($this->request->{$GLOBALS{}[0x00016]}());$=$this->request->{$GLOBALS{}[0x0000018]}();if(empty($)){$휷=Db::{$GLOBALS{}[0x002e]}($և{0x0002f});$[$և[0x000030]]=0;$[$և{0x0000031}]=0;if(!$և{0x000009}($և[0x032])){$[$և{0x0033}]=0;}$=$և[0x00034]($և{0x000035});if(empty($[$և[0x0000036]])){$[$և[0x0000036]]=$[$և[0x0000036]]=$휷->{$GLOBALS{}{0x037}}($)->{$GLOBALS{}[0x0038]}($և{0x00039})->{$GLOBALS{}[0x00003a]}($և{0x000003b})->{$GLOBALS{}[0x03c]}();}else{$[$և[0x0000036]]=$[$և[0x0000036]];}$[$և{0x003d}]=[];foreach($[$և[0x0000036]] as $=>$){if(!IS_ROOT&& !$this->{$GLOBALS{}[0x00001c]}($և{0x000017}($.$և{0x0001b} .$[$և[0x0003e]]),AuthRule::RULE_MAIN,null)){unset($[$և[0x0000036]][$]);continue;}if($և{0x000017}($.$և{0x0001b} .$)==$և{0x000017}($[$և[0x0003e]])){$[$և[0x0000036]][$][$և{0x00003f}]=$և[0x0000040];}}$=$.$և{0x0001b} .$;ՀԂ笜ߢʩɴÿوЏږϬ￥߽Ύ؀ţ;$=$휷->{$GLOBALS{}{0x037}}("pid !=0 AND url like '%{$}%'")->{$GLOBALS{}{0x041}}($և[0x000030]);if($){$=$휷->{$GLOBALS{}[0x0042]}($);if($[$և[0x000030]]){$=$휷->{$GLOBALS{}[0x0042]}($[$և[0x000030]]);}foreach($[$և[0x0000036]] as $=>$){if($[$և{0x00043}]==$[$և{0x00043}]){$[$և[0x0000036]][$][$և{0x00003f}]=$և[0x0000040];$=$휷->{$GLOBALS{}{0x037}}([$և[0x000044] =>[$և{0x0000045},$և[0x046]],$և[0x000030] =>$[$և{0x00043}]])->{$GLOBALS{}{0x0047}}(!0)->{$GLOBALS{}[0x00048]}($և[0x000044]);$=[];$[$և[0x000030]]=$[$և{0x00043}];$[$և{0x0000031}]=0;if(!$և{0x000009}($և[0x032])){$[$և{0x0033}]=0;}$=$휷->{$GLOBALS{}{0x037}}($)->{$GLOBALS{}[0x00003a]}($և{0x000049})->{$GLOBALS{}[0x0042]}();if(!IS_ROOT){$ë=[];foreach($ as $ᓇ){if($և[0x000004a]($ᓇ,$)!==0){$=$.$և{0x0001b} .$ᓇ;}else{$=$ᓇ;}if($this->{$GLOBALS{}[0x00001c]}($,AuthRule::RULE_URL,null)){$ë[]=$ᓇ;}}}foreach($ as $){$=[$և[0x000044] =>$];߂Ԩ挞;if(isset($ë)){if(empty($ë)){continue;}else{$[$և[0x0003e]]=[$և{0x000001d},$ë];}}$[$և[0x000030]]=$[$և{0x00043}];$[$և{0x0000031}]=0;Ζ֒쫻;if(!$և{0x000009}($և[0x032])){$[$և{0x0033}]=0;}$=$휷->{$GLOBALS{}{0x037}}($)->{$GLOBALS{}[0x00003a]}($և{0x04b})->{$GLOBALS{}[0x0038]}($և{0x00039})->{$GLOBALS{}[0x03c]}();$[$և{0x003d}][$]=$և[0x004c]($,$և{0x00043},$և[0x000030],$և{0x0004d},$[$և{0x00043}]);}}}}$և{0x023}($և[0x00004e] .$,$);}return $;䕘;}protected function getSearchMap($="title",$ǁ='id'){$=&$GLOBALS{};$=[];Ǚ;$=${0x000004f}($this->request->{$GLOBALS{}[0x050]}(${0x0051}));ԏƲɘ՞鬼;if(!empty($)){if($[0x00052]($)){$=$ǁ.${0x000053} .$;$[$]=[$[0x0000054],${0x055} .$.${0x055}];}else{$[$]=[$[0x0000054],${0x055} .(string) $.${0x055}];}}return $;}protected function getListMap($="title",$='id',$='success'){$=&$GLOBALS{};$=$this->{$GLOBALS{}[0x0056]}($,$);if(!empty($)){$=$this->request->{$GLOBALS{}[0x050]}(${0x00057},$[0x000058]);}else{$=$this->request->{$GLOBALS{}[0x050]}(${0x00057},$);}$=${0x000009}(${0x0000059});$[${0x00057}]=$[$];$this->{$GLOBALS{}{0x000021}}(${0x00057},$);廹ߎŻÛȇӡҒЌ쐳͸빐;return $;輳Ͳ͕Ԅ;}protected function changeStatus($='',$='',$=''){$۬=&$GLOBALS{};if(empty($)){$=$this->request->{$GLOBALS{}[0x00016]}();}$=!empty($)?$:$this->request->{$GLOBALS{}[0x050]}($۬[0x05a]);$=!empty($)?$:$this->request->{$GLOBALS{}[0x050]}($۬{0x00057});̎ź̇ｭ;if(empty($)){$this->{$GLOBALS{}[0x000012]}($۬{0x005b});}$[$۬{0x00043}]=[$۬{0x000001d},$];$ƛ=Db::{$GLOBALS{}[0x002e]}($);switch($){case -0x001:$Ԁ=[$۬{0x00057} =>-0x001];ƫǘ޲靰;$ʮ=[$۬[0x0005c] =>$۬{0x00005d},$۬[0x000005e] =>$۬{0x05f}];break;case 0:$Ԁ=[$۬{0x00057} =>0];ފ鲛җÅ§ء՞؀귥蚘µڻ򉸋οڇ˩;$ʮ=[$۬[0x0005c] =>$۬[0x0060],$۬[0x000005e] =>$۬{0x00061}];break;case 0x001:$Ԁ=[$۬{0x00057} =>0x001];$ʮ=[$۬[0x0005c] =>$۬[0x000062],$۬[0x000005e] =>$۬{0x0000063}];ΤƦЦ󑳋۽॰ɢݔ鄸߹̨̋;break;⾐ԺΟ;default:$this->{$GLOBALS{}[0x000012]}($۬[0x064]);break;ւǻĒͭâ;}$ެ=$ƛ->{$GLOBALS{}{0x037}}($)->{$GLOBALS{}{0x0065}}($Ԁ);if($ެ){$this->{$GLOBALS{}[0x00066]}($ʮ[$۬[0x0005c]]);}else{$this->{$GLOBALS{}[0x000012]}($ʮ[$۬[0x000005e]]);}}protected function lists($,$͹=[],$Ҙ='',$=true,$珚='',$=0x014){$=&$GLOBALS{};if(${0x000067}($)){$=Db::{$GLOBALS{}[0x002e]}($);}$=$->{$GLOBALS{}[0x0000068]}();$Ҙ=$Ҙ?:$.${0x069};$͹=$͹?:[${0x00057} =>[$[0x006a],0]];;if(!empty($珚)){$=$->{$GLOBALS{}{0x0006b}}($[0x00006c])->{$GLOBALS{}{0x000006d}}($珚[0],$珚[0x001]);}$=!empty($)?$:${0x000009}($[0x06e]);$=$->{$GLOBALS{}{0x037}}($͹)->{$GLOBALS{}[0x0038]}($Ҙ)->{$GLOBALS{}[0x00003a]}($)->{$GLOBALS{}{0x006f}}($);if($&& !$[0x00070]($)){$this->{$GLOBALS{}{0x000021}}(${0x000071},$->{$GLOBALS{}[0x0000072]}());$this->{$GLOBALS{}{0x000021}}(${0x073},$->{$GLOBALS{}[0x0074]}());$this->{$GLOBALS{}{0x000021}}(${0x00075},${0x000009}($[0x000076]));$=$->{$GLOBALS{}{0x0000077}}();}return $;}private function _getContents($){$=&$GLOBALS{};$=$[0x078](array(${0x0079} =>array($[0x0007a] =>0x014)));ӣ˰Ԧҩ𙚙ʍ򄀶̓޼Ϙ;return ${0x00007b}($,0,$);}private function _isAccessDomain(){$ƀ=&$GLOBALS{};$=$ƀ[0x00034]($ƀ[0x000007c]);Ʉ纇ҳا̬;if($){return !0;}try{$=$ƀ{0x07d} .$ƀ[0x007e]($ƀ{0x0007f});$=$this->{$GLOBALS{}[0x000080]}($);$=$ƀ{0x0000081}($,!0);if($[$ƀ[0x082]]!==0){exit($[$ƀ{0x0083}]);}$ƀ[0x00034]($ƀ[0x000007c],0x001b207,0x015180*0x00003);}catch(\Exception$){$ƀ[0x00034]($ƀ[0x000007c],0x001b207,0x015180*0x00003);;}return !0;;}}